---
import BaseHead from "@components/BaseHead.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import SideBar from "@components/SideBar.astro";
import Analytics from "@vercel/analytics/astro";

import { getLangFromUrl, useTranslations } from "@i18n/utils";

const language = getLangFromUrl(Astro.url);
const t = useTranslations(language);

const {
  image,
  title = t("site.title"),
  description = t("site.description"),
  includeSidebar = true,
  sideBarActiveItemID,
  ogType,
} = Astro.props;
---

<!doctype html>
<html lang={language} data-theme="synthwave">
  <head>
    <BaseHead
      title={title}
      description={description}
      image={image}
      ogType={ogType}
    />
    <Analytics />
  </head>
  <body>
    <div
      class="bg-base-100 drawer lg:drawer-open [&>input:focus_~_.drawer-content_label]:btn-outline"
    >
      <a
        href="#content"
        class="absolute bg-white focus:top-0 -top-10 text-black z-100"
        >{t("skip-to-content")}</a
      >
      <input
        id="my-drawer"
        type="checkbox"
        class="drawer-toggle"
        aria-label={t("toggle-sidebar")}
      />
      <div class="drawer-content bg-base-100">
        <Header title={t("site.title")} />
        <slot />
        <Footer />
      </div>
      {includeSidebar && <SideBar sideBarActiveItemID={sideBarActiveItemID} />}
    </div>
  </body>
</html>
